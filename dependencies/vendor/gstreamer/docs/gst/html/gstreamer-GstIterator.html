<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>GstIterator</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="GStreamer 0.10 Core Reference Manual">
<link rel="up" href="libgstreamer.html" title="GStreamer Core Library">
<link rel="prev" href="GstIndexFactory.html" title="GstIndexFactory">
<link rel="next" href="gstreamer-GstMessage.html" title="GstMessage">
<meta name="generator" content="GTK-Doc V1.8 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="chapter" href="gstreamer.html" title="GStreamer Overview">
<link rel="chapter" href="libgstreamer.html" title="GStreamer Core Library">
<link rel="chapter" href="gstreamer-support.html" title="GStreamer Core Support">
<link rel="chapter" href="gstreamer-hierarchy.html" title="Object Hierarchy">
<link rel="index" href="api-index.html" title="Index">
<link rel="index" href="ix02.html" title="Index of deprecated symbols">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="GstIndexFactory.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="libgstreamer.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer 0.10 Core Reference Manual</th>
<td><a accesskey="n" href="gstreamer-GstMessage.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2694140" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2694816" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="gstreamer-GstIterator"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2694140"></a><span class="refentrytitle">GstIterator</span>
</h2>
<p>GstIterator &#8212; Object to retrieve multiple elements in a threadsafe
way.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gst/gst.h&gt;


                    <a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>;
enum                <a href="gstreamer-GstIterator.html#GstIteratorItem">GstIteratorItem</a>;
enum                <a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>;
void                (<a href="gstreamer-GstIterator.html#GstIteratorDisposeFunction">*GstIteratorDisposeFunction</a>)       (gpointer owner);
<a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   (<a href="gstreamer-GstIterator.html#GstIteratorNextFunction">*GstIteratorNextFunction</a>)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer *result);
<a href="gstreamer-GstIterator.html#GstIteratorItem">GstIteratorItem</a>     (<a href="gstreamer-GstIterator.html#GstIteratorItemFunction">*GstIteratorItemFunction</a>)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer item);
void                (<a href="gstreamer-GstIterator.html#GstIteratorResyncFunction">*GstIteratorResyncFunction</a>)        (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);
void                (<a href="gstreamer-GstIterator.html#GstIteratorFreeFunction">*GstIteratorFreeFunction</a>)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);
gboolean            (<a href="gstreamer-GstIterator.html#GstIteratorFoldFunction">*GstIteratorFoldFunction</a>)          (gpointer item,
                                                         GValue *ret,
                                                         gpointer user_data);
#define             <a href="gstreamer-GstIterator.html#GST-ITERATOR:CAPS">GST_ITERATOR</a>                        (it)
#define             <a href="gstreamer-GstIterator.html#GST-ITERATOR-LOCK:CAPS">GST_ITERATOR_LOCK</a>                   (it)
#define             <a href="gstreamer-GstIterator.html#GST-ITERATOR-COOKIE:CAPS">GST_ITERATOR_COOKIE</a>                 (it)
#define             <a href="gstreamer-GstIterator.html#GST-ITERATOR-ORIG-COOKIE:CAPS">GST_ITERATOR_ORIG_COOKIE</a>            (it)
<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        <a href="gstreamer-GstIterator.html#gst-iterator-new">gst_iterator_new</a>                    (guint size,
                                                         GType type,
                                                         GMutex *lock,
                                                         guint32 *master_cookie,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorNextFunction">GstIteratorNextFunction</a> next,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorItemFunction">GstIteratorItemFunction</a> item,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorResyncFunction">GstIteratorResyncFunction</a> resync,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorFreeFunction">GstIteratorFreeFunction</a> free);
<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        <a href="gstreamer-GstIterator.html#gst-iterator-new-list">gst_iterator_new_list</a>               (GType type,
                                                         GMutex *lock,
                                                         guint32 *master_cookie,
                                                         GList **list,
                                                         gpointer owner,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorItemFunction">GstIteratorItemFunction</a> item,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorDisposeFunction">GstIteratorDisposeFunction</a> free);
<a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   <a href="gstreamer-GstIterator.html#gst-iterator-next">gst_iterator_next</a>                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer *elem);
void                <a href="gstreamer-GstIterator.html#gst-iterator-resync">gst_iterator_resync</a>                 (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);
void                <a href="gstreamer-GstIterator.html#gst-iterator-free">gst_iterator_free</a>                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);
void                <a href="gstreamer-GstIterator.html#gst-iterator-push">gst_iterator_push</a>                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         <a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *other);
<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        <a href="gstreamer-GstIterator.html#gst-iterator-filter">gst_iterator_filter</a>                 (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GCompareFunc func,
                                                         gpointer user_data);
<a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   <a href="gstreamer-GstIterator.html#gst-iterator-fold">gst_iterator_fold</a>                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorFoldFunction">GstIteratorFoldFunction</a> func,
                                                         GValue *ret,
                                                         gpointer user_data);
<a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   <a href="gstreamer-GstIterator.html#gst-iterator-foreach">gst_iterator_foreach</a>                (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GFunc func,
                                                         gpointer user_data);
gpointer            <a href="gstreamer-GstIterator.html#gst-iterator-find-custom">gst_iterator_find_custom</a>            (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GCompareFunc func,
                                                         gpointer user_data);


</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2694816"></a><h2>Description</h2>
<p>
A GstIterator is used to retrieve multiple objects from another object in
a threadsafe way.
</p>
<p>
Various GStreamer objects provide access to their internal structures using
an iterator.
</p>
<p>
The basic use pattern of an iterator is as follows:
</p>
<p>
</p>
<div class="example">
<a name="id2694843"></a><p class="title"><b>Example&#160;10.&#160;Using an iterator</b></p>
<div class="example-contents"><pre class="programlisting">
   it = _get_iterator(object);
   done = FALSE;
   while (!done) {
     switch (gst_iterator_next (it, &amp;item)) {
       case GST_ITERATOR_OK:
         ... use/change item here...
         gst_object_unref (item);
         break;
       case GST_ITERATOR_RESYNC:
         ...rollback changes to items...
         gst_iterator_resync (it);
         break;
       case GST_ITERATOR_ERROR:
         ...wrong parameter were given...
         done = TRUE;
         break;
       case GST_ITERATOR_DONE:
         done = TRUE;
         break;
     }
   }
   gst_iterator_free (it);
  </pre></div>
</div>
<p><br class="example-break">
</p>
<p>
Last reviewed on 2005-11-09 (0.9.4)</p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2694887"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2694898"></a><h3>
<a name="GstIterator"></a>GstIterator</h3>
<a class="indexterm" name="id2694910"></a><pre class="programlisting">typedef struct {
} GstIterator;
</pre>
<p>
GstIterator base structure. The values of this structure are 
protected for subclasses, use the methods to use the <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a>.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2694938"></a><h3>
<a name="GstIteratorItem"></a>enum GstIteratorItem</h3>
<a class="indexterm" name="id2694951"></a><pre class="programlisting">typedef enum {
  GST_ITERATOR_ITEM_SKIP	= 0,
  GST_ITERATOR_ITEM_PASS	= 1,
  GST_ITERATOR_ITEM_END		= 2
} GstIteratorItem;
</pre>
<p>
The result of a GstIteratorItemFunction.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><a name="GST-ITERATOR-ITEM-SKIP:CAPS"></a><code class="literal">GST_ITERATOR_ITEM_SKIP</code></span></td>
<td>  Skip this item
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-ITERATOR-ITEM-PASS:CAPS"></a><code class="literal">GST_ITERATOR_ITEM_PASS</code></span></td>
<td>  Return item
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-ITERATOR-ITEM-END:CAPS"></a><code class="literal">GST_ITERATOR_ITEM_END</code></span></td>
<td>   Stop after this item.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695045"></a><h3>
<a name="GstIteratorResult"></a>enum GstIteratorResult</h3>
<a class="indexterm" name="id2695058"></a><pre class="programlisting">typedef enum {
  GST_ITERATOR_DONE	= 0,
  GST_ITERATOR_OK	= 1,
  GST_ITERATOR_RESYNC	= 2,
  GST_ITERATOR_ERROR	= 3
} GstIteratorResult;
</pre>
<p>
The result of <a href="gstreamer-GstIterator.html#gst-iterator-next"><code class="function">gst_iterator_next()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><a name="GST-ITERATOR-DONE:CAPS"></a><code class="literal">GST_ITERATOR_DONE</code></span></td>
<td>   No more items in the iterator
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-ITERATOR-OK:CAPS"></a><code class="literal">GST_ITERATOR_OK</code></span></td>
<td>     An item was retrieved
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-ITERATOR-RESYNC:CAPS"></a><code class="literal">GST_ITERATOR_RESYNC</code></span></td>
<td> Datastructure changed while iterating
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-ITERATOR-ERROR:CAPS"></a><code class="literal">GST_ITERATOR_ERROR</code></span></td>
<td>  An error happened
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695184"></a><h3>
<a name="GstIteratorDisposeFunction"></a>GstIteratorDisposeFunction ()</h3>
<a class="indexterm" name="id2695198"></a><pre class="programlisting">void                (*GstIteratorDisposeFunction)       (gpointer owner);</pre>
<p>
The function that will be called when a GList iterator is freed. The
owner of the GList iterator can then clean up its resources.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>owner</code></em>&#160;:</span></td>
<td> the owner of the iterator
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695250"></a><h3>
<a name="GstIteratorNextFunction"></a>GstIteratorNextFunction ()</h3>
<a class="indexterm" name="id2695263"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   (*GstIteratorNextFunction)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer *result);</pre>
<p>
The function that will be called when the next element of the iterator
should be retrieved. 
</p>
<p>
Implementors of a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> should implement this
function and pass it to the constructor of the custom iterator.
The function will be called with the iterator lock held.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the iterator
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>result</code></em>&#160;:</span></td>
<td> a pointer to hold the next item
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the result of the operation.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695361"></a><h3>
<a name="GstIteratorItemFunction"></a>GstIteratorItemFunction ()</h3>
<a class="indexterm" name="id2695374"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIteratorItem">GstIteratorItem</a>     (*GstIteratorItemFunction)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer item);</pre>
<p>
The function that will be called after the next item of the iterator
has been retrieved. This function will typically increase the refcount
of the item or make a copy.
</p>
<p>
Implementors of a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> should implement this
function and pass it to the constructor of the custom iterator.
The function will be called with the iterator lock held.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the iterator
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>item</code></em>&#160;:</span></td>
<td> the item being retrieved.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the result of the operation.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695473"></a><h3>
<a name="GstIteratorResyncFunction"></a>GstIteratorResyncFunction ()</h3>
<a class="indexterm" name="id2695487"></a><pre class="programlisting">void                (*GstIteratorResyncFunction)        (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);</pre>
<p>
This function will be called whenever a concurrent update happened
to the iterated datastructure. The implementor of the iterator should
restart the iterator from the beginning and clean up any state it might
have.
</p>
<p>
Implementors of a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> should implement this
function and pass it to the constructor of the custom iterator.
The function will be called with the iterator lock held.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the iterator
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695554"></a><h3>
<a name="GstIteratorFreeFunction"></a>GstIteratorFreeFunction ()</h3>
<a class="indexterm" name="id2695567"></a><pre class="programlisting">void                (*GstIteratorFreeFunction)          (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);</pre>
<p>
This function will be called when the iterator is freed.
</p>
<p>
Implementors of a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> should implement this
function and pass it to the constructor of the custom iterator.
The function will be called with the iterator lock held.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the iterator
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695631"></a><h3>
<a name="GstIteratorFoldFunction"></a>GstIteratorFoldFunction ()</h3>
<a class="indexterm" name="id2695645"></a><pre class="programlisting">gboolean            (*GstIteratorFoldFunction)          (gpointer item,
                                                         GValue *ret,
                                                         gpointer user_data);</pre>
<p>
A function to be passed to <a href="gstreamer-GstIterator.html#gst-iterator-fold"><code class="function">gst_iterator_fold()</code></a>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>item</code></em>&#160;:</span></td>
<td> the item to fold
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>ret</code></em>&#160;:</span></td>
<td> a GValue collecting the result
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> data passed to <a href="gstreamer-GstIterator.html#gst-iterator-fold"><code class="function">gst_iterator_fold()</code></a>
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> TRUE if the fold should continue, FALSE if it should stop.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695771"></a><h3>
<a name="GST-ITERATOR:CAPS"></a>GST_ITERATOR()</h3>
<a class="indexterm" name="id2695784"></a><pre class="programlisting">#define GST_ITERATOR(it)		((GstIterator*)(it))
</pre>
<p>
Macro to cast to a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a></p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> value
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695836"></a><h3>
<a name="GST-ITERATOR-LOCK:CAPS"></a>GST_ITERATOR_LOCK()</h3>
<a class="indexterm" name="id2695849"></a><pre class="programlisting">#define GST_ITERATOR_LOCK(it)		(GST_ITERATOR(it)-&gt;lock)
</pre>
<p>
Macro to get the lock protecting the datastructure being iterated.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to get the lock of
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695896"></a><h3>
<a name="GST-ITERATOR-COOKIE:CAPS"></a>GST_ITERATOR_COOKIE()</h3>
<a class="indexterm" name="id2695909"></a><pre class="programlisting">#define GST_ITERATOR_COOKIE(it)		(GST_ITERATOR(it)-&gt;cookie)
</pre>
<p>
Macro to get the cookie of a <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a>. The cookie of the
iterator is the value of the master cookie when the iterator
was created.
Whenever the iterator is iterated, the value is compared to the
value of the master cookie. If they are different, a concurrent
modification happened to the iterator and a resync is needed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to get the cookie of
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2695968"></a><h3>
<a name="GST-ITERATOR-ORIG-COOKIE:CAPS"></a>GST_ITERATOR_ORIG_COOKIE()</h3>
<a class="indexterm" name="id2695983"></a><pre class="programlisting">#define GST_ITERATOR_ORIG_COOKIE(it)	(GST_ITERATOR(it)-&gt;master_cookie)
</pre>
<p>
Macro to get a pointer to where the master cookie is stored. The
master cookie protects the structure being iterated and gets updated
whenever the datastructure changes.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to get the master cookie of
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696031"></a><h3>
<a name="gst-iterator-new"></a>gst_iterator_new ()</h3>
<a class="indexterm" name="id2696044"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        gst_iterator_new                    (guint size,
                                                         GType type,
                                                         GMutex *lock,
                                                         guint32 *master_cookie,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorNextFunction">GstIteratorNextFunction</a> next,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorItemFunction">GstIteratorItemFunction</a> item,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorResyncFunction">GstIteratorResyncFunction</a> resync,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorFreeFunction">GstIteratorFreeFunction</a> free);</pre>
<p>
Create a new iterator. This function is mainly used for objects
implementing the next/resync/free function to iterate a data structure.
</p>
<p>
For each item retrieved, the <em class="parameter"><code>item</code></em> function is called with the lock
held. The <em class="parameter"><code>free</code></em> function is called when the iterator is freed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>size</code></em>&#160;:</span></td>
<td> the size of the iterator structure
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> <span class="type">GType</span> of children
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>lock</code></em>&#160;:</span></td>
<td> pointer to a <span class="type">GMutex</span>.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>master_cookie</code></em>&#160;:</span></td>
<td> pointer to a guint32 to protect the iterated object.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>next</code></em>&#160;:</span></td>
<td> function to get next item
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>item</code></em>&#160;:</span></td>
<td> function to call on each item retrieved
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>resync</code></em>&#160;:</span></td>
<td> function to resync the iterator
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>free</code></em>&#160;:</span></td>
<td> function to free the iterator
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the new <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a>.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696305"></a><h3>
<a name="gst-iterator-new-list"></a>gst_iterator_new_list ()</h3>
<a class="indexterm" name="id2696318"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        gst_iterator_new_list               (GType type,
                                                         GMutex *lock,
                                                         guint32 *master_cookie,
                                                         GList **list,
                                                         gpointer owner,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorItemFunction">GstIteratorItemFunction</a> item,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorDisposeFunction">GstIteratorDisposeFunction</a> free);</pre>
<p>
Create a new iterator designed for iterating <em class="parameter"><code>list</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>type</code></em>&#160;:</span></td>
<td> <span class="type">GType</span> of elements
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>lock</code></em>&#160;:</span></td>
<td> pointer to a <span class="type">GMutex</span> protecting the list.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>master_cookie</code></em>&#160;:</span></td>
<td> pointer to a guint32 to protect the list.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>list</code></em>&#160;:</span></td>
<td> pointer to the list
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>owner</code></em>&#160;:</span></td>
<td> object owning the list
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>item</code></em>&#160;:</span></td>
<td> function to call for each item
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>free</code></em>&#160;:</span></td>
<td> function to call when the iterator is freed
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the new <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> for <em class="parameter"><code>list</code></em>.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696549"></a><h3>
<a name="gst-iterator-next"></a>gst_iterator_next ()</h3>
<a class="indexterm" name="id2696562"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   gst_iterator_next                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         gpointer *elem);</pre>
<p>
Get the next item from the iterator. For iterators that return
refcounted objects, the returned object will have its refcount
increased and should therefore be unreffed after usage.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to iterate
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>elem</code></em>&#160;:</span></td>
<td> pointer to hold next element
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> The result of the iteration. Unref after usage if this is
a refcounted object.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696657"></a><h3>
<a name="gst-iterator-resync"></a>gst_iterator_resync ()</h3>
<a class="indexterm" name="id2696670"></a><pre class="programlisting">void                gst_iterator_resync                 (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);</pre>
<p>
Resync the iterator. this function is mostly called
after <a href="gstreamer-GstIterator.html#gst-iterator-next"><code class="function">gst_iterator_next()</code></a> returned <a href="gstreamer-GstIterator.html#GST-ITERATOR-RESYNC:CAPS"><code class="literal">GST_ITERATOR_RESYNC</code></a>.
</p>
<p>
MT safe.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to resync
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696754"></a><h3>
<a name="gst-iterator-free"></a>gst_iterator_free ()</h3>
<a class="indexterm" name="id2696767"></a><pre class="programlisting">void                gst_iterator_free                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it);</pre>
<p>
Free the iterator.
</p>
<p>
MT safe.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to free
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696828"></a><h3>
<a name="gst-iterator-push"></a>gst_iterator_push ()</h3>
<a class="indexterm" name="id2696842"></a><pre class="programlisting">void                gst_iterator_push                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         <a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *other);</pre>
<p>
Pushes <em class="parameter"><code>other</code></em> iterator onto <em class="parameter"><code>it</code></em>. All calls performed on <em class="parameter"><code>it</code></em> are
forwarded tot <em class="parameter"><code>other</code></em>. If <em class="parameter"><code>other</code></em> returns <a href="gstreamer-GstIterator.html#GST-ITERATOR-DONE:CAPS"><span class="type">GST_ITERATOR_DONE</span></a>, it is
popped again and calls are handled by <em class="parameter"><code>it</code></em> again.
</p>
<p>
This function is mainly used by objects implementing the iterator
next function to recurse into substructures.
</p>
<p>
MT safe.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to use
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>other</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to push
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2696984"></a><h3>
<a name="gst-iterator-filter"></a>gst_iterator_filter ()</h3>
<a class="indexterm" name="id2696997"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a>*        gst_iterator_filter                 (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GCompareFunc func,
                                                         gpointer user_data);</pre>
<p>
Create a new iterator from an existing iterator. The new iterator
will only return those elements that match the given compare function <em class="parameter"><code>func</code></em>.
<em class="parameter"><code>func</code></em> should return 0 for elements that should be included
in the iterator.
</p>
<p>
When this iterator is freed, <em class="parameter"><code>it</code></em> will also be freed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to filter
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>func</code></em>&#160;:</span></td>
<td> the compare function to select elements
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> user data passed to the compare function
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a new <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a>.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2697142"></a><h3>
<a name="gst-iterator-fold"></a>gst_iterator_fold ()</h3>
<a class="indexterm" name="id2697156"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   gst_iterator_fold                   (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         <a href="gstreamer-GstIterator.html#GstIteratorFoldFunction">GstIteratorFoldFunction</a> func,
                                                         GValue *ret,
                                                         gpointer user_data);</pre>
<p>
Folds <em class="parameter"><code>func</code></em> over the elements of <em class="parameter"><code>iter</code></em>. That is to say, <em class="parameter"><code>proc</code></em> will be called
as <em class="parameter"><code>proc</code></em> (object, <em class="parameter"><code>ret</code></em>, <em class="parameter"><code>user_data</code></em>) for each object in <em class="parameter"><code>iter</code></em>. The normal use
of this procedure is to accumulate the results of operating on the objects in
<em class="parameter"><code>ret</code></em>.
</p>
<p>
This procedure can be used (and is used internally) to implement the foreach
and find_custom operations.
</p>
<p>
The fold will proceed as long as <em class="parameter"><code>func</code></em> returns TRUE. When the iterator has no
more arguments, <a href="gstreamer-GstIterator.html#GST-ITERATOR-DONE:CAPS"><span class="type">GST_ITERATOR_DONE</span></a> will be returned. If <em class="parameter"><code>func</code></em> returns FALSE,
the fold will stop, and <a href="gstreamer-GstIterator.html#GST-ITERATOR-OK:CAPS"><span class="type">GST_ITERATOR_OK</span></a> will be returned. Errors or resyncs
will cause fold to return <a href="gstreamer-GstIterator.html#GST-ITERATOR-ERROR:CAPS"><span class="type">GST_ITERATOR_ERROR</span></a> or <a href="gstreamer-GstIterator.html#GST-ITERATOR-RESYNC:CAPS"><span class="type">GST_ITERATOR_RESYNC</span></a> as
appropriate.
</p>
<p>
The iterator will not be freed.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to fold over
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>func</code></em>&#160;:</span></td>
<td> the fold function
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>ret</code></em>&#160;:</span></td>
<td> the seed value passed to the fold function
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> user data passed to the fold function
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> A <a href="gstreamer-GstIterator.html#GstIteratorResult"><span class="type">GstIteratorResult</span></a>, as described above.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2697413"></a><h3>
<a name="gst-iterator-foreach"></a>gst_iterator_foreach ()</h3>
<a class="indexterm" name="id2697426"></a><pre class="programlisting"><a href="gstreamer-GstIterator.html#GstIteratorResult">GstIteratorResult</a>   gst_iterator_foreach                (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GFunc func,
                                                         gpointer user_data);</pre>
<p>
Iterate over all element of <em class="parameter"><code>it</code></em> and call the given function <em class="parameter"><code>func</code></em> for
each element.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to iterate
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>func</code></em>&#160;:</span></td>
<td> the function to call for each element.
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> user data passed to the function
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the result call to <a href="gstreamer-GstIterator.html#gst-iterator-fold"><code class="function">gst_iterator_fold()</code></a>. The iterator will not be
freed.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2697562"></a><h3>
<a name="gst-iterator-find-custom"></a>gst_iterator_find_custom ()</h3>
<a class="indexterm" name="id2697576"></a><pre class="programlisting">gpointer            gst_iterator_find_custom            (<a href="gstreamer-GstIterator.html#GstIterator">GstIterator</a> *it,
                                                         GCompareFunc func,
                                                         gpointer user_data);</pre>
<p>
Find the first element in <em class="parameter"><code>it</code></em> that matches the compare function <em class="parameter"><code>func</code></em>.
<em class="parameter"><code>func</code></em> should return 0 when the element is found.
</p>
<p>
The iterator will not be freed.
</p>
<p>
This function will return NULL if an error or resync happened to
the iterator.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>it</code></em>&#160;:</span></td>
<td> The <a href="gstreamer-GstIterator.html#GstIterator"><span class="type">GstIterator</span></a> to iterate
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>func</code></em>&#160;:</span></td>
<td> the compare function to use
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>user_data</code></em>&#160;:</span></td>
<td> user data passed to the compare function
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> The element in the iterator that matches the compare
function or NULL when no element matched.

MT safe.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2697719"></a><h2>See Also</h2>
<a href="GstElement.html" title="GstElement"><span class="type">GstElement</span></a>, <a href="GstBin.html" title="GstBin"><span class="type">GstBin</span></a>
</div>
</div>
</body>
</html>
